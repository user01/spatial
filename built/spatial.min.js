var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},Spatial;!function(a){var b=function(){function a(b){var c=this;if(this.clone=function(){return a.Clone(c)},this.toObj=function(){return{t:"v"+c.dimension,v:c._values}},this.toStr=function(){return JSON.stringify(c.toObj())},this.equal=function(b){return a.Equal(c,b)},this.distanceTo=function(b){return a.DistanceTo(c,b)},this.intensityAt=function(){return 0},this.closestVector=function(){return c.clone()},b.length<1||b.length>4)throw new RangeException;this._values=new Float32Array(b)}return Object.defineProperty(a.prototype,"values",{get:function(){return this._values},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dimension",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),a.fromObj=function(b){return new a(b.v)},a.fromStr=function(b){return a.fromObj(JSON.parse(b))},a.DistanceTo=function(b,c){a.DimensionCheck(b,c);for(var d=0,e=0;e<b.dimension;e++)d+=(b.values[e]-c.values[e])*(b.values[e]-c.values[e]);return Math.sqrt(d)},a.Clone=function(b){return new a(Array.prototype.slice.call(b.values))},a.Add=function(b,c){a.DimensionCheck(b,c);for(var d=new Array,e=0;e<b.dimension;e++)d.push(b.values[e]+c.values[e]);return new a(d)},a.Subtract=function(b,c){return a.Add(b,a.Negate(c))},a.Scale=function(b,c){for(var d=new Array,e=0;e<b.dimension;e++)d.push(b.values[e]*c);return new a(d)},a.Negate=function(b){return a.Scale(b,-1)},a.Equal=function(a,b){if(a.dimension!=b.dimension)return!1;for(var c=0;c<a.dimension;c++)if(Math.abs(a.values[c]-b.values[c])>.05)return!1;return!0},a.Dot=function(b,c){a.DimensionCheck(b,c);for(var d=0,e=0;e<b.dimension;e++)d+=b.values[e]*c.values[e];return d},a.DimensionCheck=function(a,b){if(a.dimension!=b.dimension)throw new RangeException;return!0},a.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)},a}();a.Vector=b;var c=function(a){function b(b,c){a.call(this,[b,c])}return __extends(b,a),Object.defineProperty(b.prototype,"x",{get:function(){return this._values[0]},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"y",{get:function(){return this._values[1]},enumerable:!0,configurable:!0}),b.fromObj=function(a){return new b(a.v[0],a.v[1])},b.fromStr=function(a){return b.fromObj(JSON.parse(a))},b.build=function(a){if(2!=a.length)throw new RangeException;return new b(a[0],a[1])},b}(b);a.Vector2=c;var d=function(a){function b(b,c,d){a.call(this,[b,c,d])}return __extends(b,a),Object.defineProperty(b.prototype,"x",{get:function(){return this._values[0]},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"y",{get:function(){return this._values[1]},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"z",{get:function(){return this._values[2]},enumerable:!0,configurable:!0}),b.fromObj=function(a){return new b(a.v[0],a.v[1],a.v[2])},b.fromStr=function(a){return b.fromObj(JSON.parse(a))},b.build=function(a){if(3!=a.length)throw new RangeException;return new b(a[0],a[1],a[2])},b}(b);a.Vector3=d;var e=function(a){function b(b,c,d,e){a.call(this,[b,c,d,e])}return __extends(b,a),Object.defineProperty(b.prototype,"x",{get:function(){return this._values[0]},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"y",{get:function(){return this._values[1]},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"z",{get:function(){return this._values[2]},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"w",{get:function(){return this._values[3]},enumerable:!0,configurable:!0}),b.fromObj=function(a){return new b(a.v[0],a.v[1],a.v[2],a.v[3])},b.fromStr=function(a){return b.fromObj(JSON.parse(a))},b.build=function(a){if(4!=a.length)throw new RangeException;return new b(a[0],a[1],a[2],a[3])},b}(b);a.Vector4=e}(Spatial||(Spatial={}));